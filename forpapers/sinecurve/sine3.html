<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    
    <title>sine3.cdy</title>
    <style type="text/css">
        * {
            margin: 0px;
            padding: 0px;
        }

        #CSConsole {
            background-color: #FAFAFA;
            border-top: 1px solid #333333;
            bottom: 0px;
            height: 200px;
            overflow-y: scroll;
            position: fixed;
            width: 100%;
        }
    </style>
    <link rel="stylesheet" href="https://cindyjs.org/dist/v0.8/CindyJS.css">
    <script type="text/javascript" src="https://cindyjs.org/dist/v0.8/Cindy.js"></script>
    <script type="text/javascript" src="https://cindyjs.org/dist/v0.8/KetCindyPlugin.js"></script>
<script id="csinit" type="text/x-cindyscript">
use("KetCindyPlugin");
Dircdy=loaddirectory;
setdirectory(plugindirectory);
import("ketcindy.ini");

pauseflg=0;
X.x=pi;
pC=[-1,0];
pO=[0,0];
Lastx=0;
ptL=[[0,0],[pi,0]];
kcL=[];
ctrall=12;
drwsin=false;
Opt=["dr,2","Color=red","Msg=n"];
Findpointongraph(x,tt):=(
  regional(xmx,//tt,
     t2,flg,posx,tmp,tmp1,pP,pQ,
    op,eps);
  eps=5*10^(-2);
  flg=0;
  xmx=3.5;
  tt=2*seconds();
  posx=0;
  if(posx>x-eps,
    stopanimation();
    flg=1;
  );
  if((flg==0)&(tt<=pi/2),
    Listplot("t",[[0,0],x*[cos(tt),sin(tt)]],Opt);
    flg=1;
  );
  if((flg==0)&(tt-pi/2<x+eps),
    t2=min([tt-pi/2,x]);
    Listplot("y",[[0,0],x*[0,1]],Opt);
    Expr([0,x],"e","x");
    tmp=Assign("Rng=[0,t]",["t",t2]);
    Circledata("t1",[pC,pO],append(Opt,tmp));
    pP=pC+[cos(t2),sin(t2)];
    pQ=pP+(x-t2)*[-sin(t2),cos(t2)];
    Listplot("t",[pP,pQ],Opt);
    flg=1;
  );
  if((flg==0)&(tt-pi/2<x+xmx),
    t2=tt-pi/2-x;
    Listplot("y",[[0,0],x*[0,1]],Opt);
    Expr([0,x],"e","x");
    tmp=Assign("Rng=[0,t]",["t",x]);
    Circledata("t1",[pC,pO],append(Opt,tmp));
    pP=pC+[cos(x),sin(x)];
    op=["Color=blue","Msg=n"];
    Listplot("tc",[pC,pP],op);
    Anglemark("1",[pO,pC,pP],append(op,"E=x"));
    op=concat(op,["do","size->2"]);
    t2=min([t2,2]);
    posx=pP_1+t2/2*(X.x-pP_1);
    pQ=[posx,pP_2];
    Listplot("h",[pP,pQ],op);
    if(abs(posx-X.x)<eps,
      tmp=[X.x,pP_2];
      Listplot("v",[tmp,X],op);
      if(length(ptL)==0,
        ptL=append(ptL,tmp);
      ,
        tmp1=apply(ptL,|#-tmp|);
        if(min(tmp1)>eps,
          Lastx=tmp_1;
          ptL=append(ptL,tmp);
          ptL=sort(ptL,[#_1]);
        );
      );
    );
    flg=1;
  );
);

Initbezier(ptL):=(
  regional(kL,cL,pt1,pt2,tmp,tmp1);
  kL=ptL;
  if(!contains(ptL,[0,0]),
    kL=prepend([0,0],kL);
  );
  cL="";
  forall(2..(length(kL)),
    pt1=kL_(#-1);
    pt2=kL_#;
    tmp=unicode(text(64+#-1),base->10);
    tmp1=tmp+"1.xy="+Textformat((2*pt1+pt2)/3,3)+";";
    parse(tmp1);
    tmp1=tmp+"2.xy="+Textformat((pt1+2*pt2)/3,3)+";";
    parse(tmp1);
    cL=cL+","+tmp+"1,"+tmp+"2";
  );
  cL="["+substring(cL,1,length(cL))+"];";
  cL=parse(cL);
  homectr=false;
  [kL,cL];
);

Preparectrpt(nn):=( //no ketjs on
  regional(tmp,tmp1,tmp2,out);
  out=[];
  forall(1..nn,
    tmp=unicode(text(64+#),base->10);
    tmp1=[7,YMAX-#/4];
    tmp2=[7.5,YMAX-#/4];
    Putpoint(tmp+"1",tmp1):Putpoint(tmp+"2",tmp2):
    inspect(parse(tmp+"1"),"ptsize",2);
    inspect(parse(tmp+"2"),"ptsize",2);
    inspect(parse(tmp+"1"),"labeled",false);
    inspect(parse(tmp+"2"),"labeled",false);
    out=concat(out,[parse(tmp+"1"),parse(tmp+"2")]);
  );
  out;
); //no ketjs off

Resetctrpt(nn):=(
  regional(tmp,tmp1,tmp2);
  forall(1..nn,
    tmp=unicode(text(64+#),base->10);
    tmp1=Textformat([7,YMAX-#/4],5);
    tmp2=Textformat([7.5,YMAX-#/4],5);
    parse(tmp+"1.xy="+tmp1+";");
    parse(tmp+"2.xy="+tmp2+";");
  );
  homectr=true;
);

stopanimation();

Resetctrpt(ctrall);
;
</script>
<script id="csdraw" type="text/x-cindyscript">
Ketinit();
Setparent(Cdyname()+"fig");
Setketcindyjs(["Nolabel=all","Grid=0.2","Local=n"]);
Setwindow([-2.5,6.5],[-1.5,pi]);
Slider("X",[0,0],[2*pi,0]);
//parse("Xl.xy=[0,0];");
//parse("Xr.xy=[2*pi,0];");
//Addax(0);

Setax([7,"se"]);
Circledata("0",[pC,pO],["dr,1.5","Msg=n"]);
Bowdata("0",[pC,pO],[1.4,0.3,"E=1","do,1,1.2","Msg=n"]);
Letter([[2,YMAX],"s1","Graph of $y=\sin x$"],["size->30"]);
Listplot("0",[pO,[x,0]],Opt);
x=X.x;
x=round(x*100)/100;
Expr([x,-0.05],"s1","x",[]);
Expr([x,0.1],"n1",text(x),[]);
Htickmark([1,"1",2,"2",3,"3",4,"4",5,"5",6,"6"]);
Vtickmark([-1,"-1",1,"1",2,"2",3,"3"]);
op=["Msg=n","do,0.8"];
forall(1..6,
  Listplot("v"+text(#),[[#,-1],[#,3]],op);
);
forall(remove((-1)..3,[0]),
  Listplot("h"+text(#+2),[[0,#],[6,#]],op);
);

if(length(ptL)>0,
  Pointdata("0",ptL,["Size=3","Color=green","Msg=n"]);
);

//if(abs(Lastx-x)>0.09,
 Findpointongraph(x,2*seconds());
//);

if(length(kcL)==0, //no ketjs on
  tmp=Preparectrpt(ctrall);
); //no ketjs off

if(!homectr,
  Bezier("1",kcL_1,kcL_2,["Num=20"]);
  tmp=apply(bz1,abs(#_2-sin(#_1)));
  mean=sum(tmp)/length(bz1);
  tmp="Diff : "+Sprintf(mean*1000,2)+" ($\times 10^{-3}$)";
  Letter(A,"w",tmp,["Size=1.8"]);
);

if(drwsin,
  Plotdata("sin","sin(x)","x=[0,XMAX]",["Color=blue"]);
);

Figpdf();
Windispg();
;
</script>
    <script type="text/javascript">
var cdy = CindyJS({
  scripts: "cs*",
  defaultAppearance: {
    dimDependent: 0.7,
    fontFamily: "sans-serif",
    lineSize: 1,
    pointSize: 5.0,
    textsize: 12.0
  },
  angleUnit: "Â°",
  geometry: [
    {name: "SW", type: "Free", pos: [4.0, 2.4, -1.6], color: [1.0, 0.0, 0.0], labeled: true},
    {name: "NE", type: "Free", pos: [4.0, 1.9332861538461537, 0.6153846153846154], color: [1.0, 0.0, 0.0], labeled: true},
    {name: "X", type: "Free", pos: [4.0, 0.0, 1.2732406201955062], color: [1.0, 0.0, 0.0], size: 3.0},
    {name: "A1", type: "Free", pos: [4.0, 1.6523371428571427, 0.5714285714285714], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "A2", type: "Free", pos: [4.0, 1.5421813333333332, 0.5333333333333333], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "B1", type: "Free", pos: [4.0, 1.50948, 0.5714285714285714], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "B2", type: "Free", pos: [4.0, 1.4088479999999999, 0.5333333333333333], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "C1", type: "Free", pos: [4.0, 1.366622857142857, 0.5714285714285714], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "C2", type: "Free", pos: [4.0, 1.2755146666666666, 0.5333333333333333], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "D1", type: "Free", pos: [4.0, 1.2237657142857141, 0.5714285714285714], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "D2", type: "Free", pos: [4.0, 1.1421813333333333, 0.5333333333333333], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "E1", type: "Free", pos: [4.0, 1.0809085714285713, 0.5714285714285714], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "E2", type: "Free", pos: [4.0, 1.008848, 0.5333333333333333], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "F1", type: "Free", pos: [4.0, 0.9380514285714285, 0.5714285714285714], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "F2", type: "Free", pos: [4.0, 0.8755146666666667, 0.5333333333333333], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "G1", type: "Free", pos: [4.0, 0.7951942857142857, 0.5714285714285714], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "G2", type: "Free", pos: [4.0, 0.7421813333333334, 0.5333333333333333], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "H1", type: "Free", pos: [4.0, 0.652337142857143, 0.5714285714285714], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "H2", type: "Free", pos: [4.0, 0.6088480000000001, 0.5333333333333333], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "I1", type: "Free", pos: [4.0, 0.50948, 0.5714285714285714], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "I2", type: "Free", pos: [4.0, 0.47551466666666664, 0.5333333333333333], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "J1", type: "Free", pos: [4.0, 0.36662285714285714, 0.5714285714285714], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "J2", type: "Free", pos: [4.0, 0.3421813333333333, 0.5333333333333333], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "K1", type: "Free", pos: [4.0, 0.2237657142857143, 0.5714285714285714], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "K2", type: "Free", pos: [4.0, 0.208848, 0.5333333333333333], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "L1", type: "Free", pos: [4.0, 0.08090857142857143, 0.5714285714285714], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "L2", type: "Free", pos: [4.0, 0.07551466666666666, 0.5333333333333333], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "A", type: "Free", pos: [4.0, 0.7109207708779444, 0.6213029033676434], color: [1.0, 0.0, 0.0], size: 2.0},
    {name: "Text1", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [1.0, 0.286, 0.286], fillalpha: 0.27272728085517883, script: "Viewtex();\nkc();", text: "Figure", textsize: 18.0, dock: {corner: "UL", offset: [10.0, -20.0]}},
    {name: "Text2", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 0.27272728085517883, script: "if(length(Shellparent)>0,\n  Makeshell(),Makebat();\n);\nif(indexof(Libname,\"sci\")>0,\n  writetosci(2),writetoRS(2)\n);\nkc();", text: "Parent", textsize: 18.0, dock: {corner: "UL", offset: [77.0, -20.0]}},
    {name: "Text21", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [0.0, 1.0, 1.0], fillalpha: 0.27272728085517883, script: "Mkketcindyjs();", text: "KeTJS", textsize: 18.0, dock: {corner: "UL", offset: [488.0, -20.0]}},
    {name: "Text11", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [0.0, 1.0, 0.0], fillalpha: 0.27272728085517883, script: "Maketitle();", text: "Title", textsize: 18.0, dock: {corner: "UL", offset: [316.0, -20.0]}},
    {name: "Text3", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [1.0, 0.929, 0.6], fillalpha: 0.27272728085517883, script: "Parafolder();", text: "ParaF", textsize: 18.0, dock: {corner: "UL", offset: [143.0, -20.0]}},
    {name: "Text4", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [0.51, 0.949, 1.0], fillalpha: 0.27272728085517883, script: "Mkanimation();", text: "Anime", textsize: 18.0, dock: {corner: "UL", offset: [204.0, -20.0]}},
    {name: "Text12", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [0.467, 0.0, 0.718], fillalpha: 0.27272728085517883, script: "Mkslides();", text: "Slide", textsize: 18.0, dock: {corner: "UL", offset: [365.0, -20.0]}},
    {name: "Text13", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [1.0, 0.737, 0.467], fillalpha: 0.27272728085517883, script: "Mkslidesummary();", text: "Digest", textsize: 18.0, dock: {corner: "UL", offset: [420.0, -20.0]}},
    {name: "Text5", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [0.0, 0.0, 1.0], fillalpha: 0.27272728085517883, script: "Mkflipanime();", text: "Flip", textsize: 18.0, dock: {corner: "UL", offset: [271.0, -20.0]}},
    {name: "Text43", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 0.27272728085517883, script: "kcL=Initbezier(ptL);", text: "Draw", textsize: 18.0, dock: {corner: "LL", offset: [422.0, 29.0]}},
    {name: "Text22", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [0.0, 1.0, 1.0], fillalpha: 0.27272728085517883, script: "Mkketcindyjs(append(Ketjsoption(),\"Web=n\"));\n", text: "KeTJSoff", textsize: 18.0, dock: {corner: "UL", offset: [551.0, -20.0]}},
    {name: "Text41", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 0.27272728085517883, script: "pauseflg=0;\nresetclock();playanimation();", text: "Plot", textsize: 18.0, dock: {corner: "LL", offset: [271.0, 29.0]}},
    {name: "Text42'", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 0.27272728085517883, script: "ptL=ptL_(1..(length(ptL)-1));", text: "Undo", textsize: 18.0, dock: {corner: "LL", offset: [340.0, 29.0]}},
    {name: "Text44", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 0.27272728085517883, script: "ptL=[];\nkcL=[];\nbz1=[];\nX.x=pi;\nx=X.x;\ndrwsin=false;\nResetctrpt(ctrall);\npauseflg=0;", text: "New", textsize: 18.0, dock: {corner: "LL", offset: [625.0, 29.0]}},
    {name: "Text45", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 0.27272728085517883, script: "drwsin=!drwsin;\n", text: "Sin", textsize: 18.0, dock: {corner: "LL", offset: [568.0, 29.0]}},
    {name: "Text44'", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 0.27272728085517883, script: "bz1=[];\nResetctrpt(ctrall);", text: "Add", textsize: 18.0, dock: {corner: "LL", offset: [499.0, 29.0]}},
    {name: "Text44''", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [1.0, 0.737, 0.467], fillalpha: 0.27272728085517883, script: "pauseflg=1-pauseflg;\nif(pauseflg==1,\n  stopanimation();\n,\n  playanimation();\n);", text: "Pause", textsize: 18.0, dock: {corner: "LL", offset: [189.0, 29.0]}}
  ],
  ports: [{
    id: "CSCanvas",
    width: 910,
    height: 469,
    transform: [{visibleRect: [-3.6951828271156373, 4.124953427475189, 8.614157577541786, -2.2190912426174827]}],
    axes: true,
    grid: 0.1,
    background: "rgb(168,176,192)"
  }],
  csconsole: false,
  cinderella: {build: 1901, version: [2, 9, 1901]}
});
    </script>
</head>
<body>
    <div id="CSCanvas"></div>
</body>
</html>